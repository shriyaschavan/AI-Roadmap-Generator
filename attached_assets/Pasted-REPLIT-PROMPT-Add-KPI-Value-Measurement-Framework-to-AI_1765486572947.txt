REPLIT PROMPT ‚Äî Add KPI & Value Measurement Framework to AI Roadmap
I want you to add a full KPI & Value Measurement Framework to my AI Roadmap Generator so that, for each AI initiative in the roadmap, the app shows:
‚Ä¢	Primary KPI(s)
‚Ä¢	Secondary KPI(s)
‚Ä¢	Baseline vs Target
‚Ä¢	Value Driver Category
‚Ä¢	Measurement Frequency
‚Ä¢	Required Data Sources
It must be useful but not visually crowded. Use a compact block with an optional ‚ÄúShow details‚Äù toggle.
Please implement the following changes in both backend (Flask / app.py) and frontend (templates/results.html).
________________________________________
PART 1 ‚Äî BACKEND: KPI ASSIGNMENT LOGIC (app.py)
1.	Locate the /generate route in app.py where:
o	The form inputs are read (organization_name, industry, goals, ai_maturity, etc.)
o	The roadmap text is generated by the LLM
o	The Mermaid mermaid_chart is created
o	The template results.html is rendered
2.	If you already have a structured initiatives list (e.g., from previous scoring logic), REUSE it.
If not, create a simple parser that:
o	Identifies initiatives from the roadmap text
o	Uses headings and bullet points/numbered lists
o	Produces a list like:
3.	initiatives = [
4.	    {
5.	        "phase": "Short-term (0‚Äì6 months)",
6.	        "title": "Customer Feedback Sentiment Analysis",
7.	        "description": "Implement NLP tools to analyze customer feedback..."
8.	    },
9.	    ...
10.	]
11.	Create a function to assign KPIs to each initiative:
Add a function in app.py like:
def assign_kpis(initiative, industry=None, goals=None):
    """
    initiative: dict with keys like 'title' and 'description'
    industry: string
    goals: list of strategic goals
    Returns a dict with KPI-related metadata.
    """
The function should return a dict with keys:
{
    "primary_kpis": [ ... ],
    "secondary_kpis": [ ... ],
    "baseline": "string",
    "target": "string",
    "value_driver": "Cost Savings / Revenue Growth / Efficiency / Customer Experience / Risk Reduction",
    "measurement_frequency": "Weekly / Monthly / Quarterly",
    "data_sources": [ ... ]
}
12.	Use rule-based logic to assign KPIs based on initiative title/description (and optionally industry and goals). Examples (not exhaustive):
o	If initiative mentions "chatbot", "customer support", "service" ‚Üí
ÔÇß	primary_kpis: ["Call Deflection Rate (%)", "Average Handling Time"]
ÔÇß	secondary_kpis: ["CSAT / NPS"]
ÔÇß	value_driver: "Cost Savings & Customer Experience"
ÔÇß	frequency: "Monthly"
ÔÇß	data_sources: ["Contact Center Platform", "CRM", "Ticketing System"]
o	If initiative mentions "demand forecasting", "inventory", "stock" ‚Üí
ÔÇß	primary_kpis: ["Forecast Accuracy (%)", "Stock-Out Rate (%)"]
ÔÇß	secondary_kpis: ["Inventory Holding Cost"]
ÔÇß	value_driver: "Efficiency & Cost Savings"
ÔÇß	frequency: "Monthly"
ÔÇß	data_sources: ["ERP", "Sales History", "Inventory System"]
o	If initiative mentions "personalization", "recommendation", "marketing" ‚Üí
ÔÇß	primary_kpis: ["Conversion Rate", "Average Order Value"]
ÔÇß	secondary_kpis: ["Click-Through Rate", "Customer Lifetime Value"]
ÔÇß	value_driver: "Revenue Growth"
ÔÇß	frequency: "Monthly"
ÔÇß	data_sources: ["Web Analytics", "CRM", "Marketing Automation Platform"]
o	If initiative mentions "governance", "compliance", "risk", "ethics" ‚Üí
ÔÇß	primary_kpis: ["Number of AI Incidents", "Policy Adoption Rate"]
ÔÇß	secondary_kpis: ["Audit Findings", "Compliance Breach Count"]
ÔÇß	value_driver: "Risk Reduction"
ÔÇß	frequency: "Quarterly"
ÔÇß	data_sources: ["Risk Registers", "Audit Logs", "Policy Management Tools"]
o	If nothing matches, use sensible generic defaults:
ÔÇß	primary_kpis: ["Outcome Metric Specific to Use Case"]
ÔÇß	secondary_kpis: ["Adoption Rate", "Time-to-Value"]
ÔÇß	value_driver: "Efficiency & Value Realization"
ÔÇß	measurement_frequency: "Monthly"
ÔÇß	data_sources: ["Core Operational Systems", "Data Warehouse"]
13.	Apply KPI assignment to every initiative:
After you have initiatives list, loop:
for initiative in initiatives:
    initiative["kpis"] = assign_kpis(initiative, industry=industry, goals=goals)
14.	Pass the initiatives with KPIs into the template:
In render_template("results.html", ...), add:
initiatives=initiatives
(If you already pass an initiatives structure, extend it to include kpis.)
________________________________________
PART 2 ‚Äî FRONTEND: DISPLAY KPIs UNDER EACH INITIATIVE (results.html)
1.	Locate the "AI Implementation Roadmap" section in results.html:
It currently looks like:
<section class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 md:p-8 mb-8" aria-labelledby="roadmap-heading">
    <h2 id="roadmap-heading" class="text-2xl md:text-3xl font-semibold text-gray-900 mb-6">AI Implementation Roadmap</h2>
    <div class="roadmap-content prose prose-slate max-w-none">
        {{ roadmap | safe }}
    </div>
</section>
2.	Add a structured rendering loop for initiatives (without removing the existing narrative):
Under or instead of the prose block, add something like:
{% if initiatives %}
<div class="space-y-6 mt-8">
    {% for item in initiatives %}
    <div class="border border-gray-200 rounded-lg p-4 bg-white shadow-sm">
        <h3 class="text-lg font-semibold text-gray-900">
            {{ item.title }}
        </h3>
        {% if item.description %}
        <p class="text-sm text-gray-700 mt-1">
            {{ item.description }}
        </p>
        {% endif %}

        <!-- KPI Summary (Compact Line) -->
        <div class="mt-3 text-xs sm:text-sm text-gray-600 flex flex-wrap items-center gap-3">
            <span>üéØ <span class="font-medium">Primary KPIs:</span> {{ item.kpis.primary_kpis | join(", ") }}</span>
            <span>|</span>
            <span>üí° <span class="font-medium">Value Driver:</span> {{ item.kpis.value_driver }}</span>
            <button type="button"
                    class="text-primary-600 underline text-xs sm:text-[0.8rem]"
                    onclick="toggleKpiDetails(this)">
                Show KPI details
            </button>
        </div>

        <!-- KPI Details (Collapsible) -->
        <div class="kpi-details hidden mt-3 rounded-md bg-gray-50 border border-gray-200 p-3 text-xs sm:text-sm text-gray-700">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <div>
                    <p class="font-medium text-gray-800 mb-1">Primary KPIs</p>
                    <ul class="list-disc ml-4">
                        {% for kpi in item.kpis.primary_kpis %}
                        <li>{{ kpi }}</li>
                        {% endfor %}
                    </ul>
                </div>
                <div>
                    <p class="font-medium text-gray-800 mb-1">Secondary KPIs</p>
                    <ul class="list-disc ml-4">
                        {% for kpi in item.kpis.secondary_kpis %}
                        <li>{{ kpi }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>

            <div class="mt-3 grid grid-cols-1 md:grid-cols-3 gap-3">
                <div>
                    <p class="font-medium text-gray-800 mb-1">Baseline ‚Üí Target</p>
                    <p>{{ item.kpis.baseline }} ‚Üí {{ item.kpis.target }}</p>
                </div>
                <div>
                    <p class="font-medium text-gray-800 mb-1">Measurement Frequency</p>
                    <p>{{ item.kpis.measurement_frequency }}</p>
                </div>
                <div>
                    <p class="font-medium text-gray-800 mb-1">Data Sources</p>
                    <p>{{ item.kpis.data_sources | join(", ") }}</p>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
The key requirement is:
o	Compact one-line KPI summary
o	Optional detailed expansion when ‚ÄúShow KPI details‚Äù is clicked
This keeps the UI presentable and not crowded.
________________________________________
PART 3 ‚Äî ADD A SMALL TOGGLER SCRIPT (results.html)
At the bottom of results.html, inside {% block scripts %} (or alongside other scripts), add:
<script>
function toggleKpiDetails(button) {
    const details = button.parentElement.nextElementSibling;
    const isHidden = details.classList.contains("hidden");
    details.classList.toggle("hidden");
    button.textContent = isHidden ? "Hide KPI details" : "Show KPI details";
}
</script>
________________________________________
PART 4 ‚Äî STYLING TWEAKS (results.html)
In the <style> section or CSS block already present at the bottom of results.html, add:
.kpi-details {
    animation: kpiFadeIn 0.2s ease-out;
}
@keyframes kpiFadeIn {
    from { opacity: 0; transform: translateY(3px); }
    to { opacity: 1; transform: translateY(0); }
}
Keep all styling aligned with the existing Tailwind utility classes already used.
________________________________________
PART 5 ‚Äî QUALITY CHECK
When you are done, the result should be:
‚Ä¢	Each initiative has a clean, single-line KPI summary row (no clutter).
‚Ä¢	Clicking ‚ÄúShow KPI details‚Äù reveals a compact, well-structured KPI block.
‚Ä¢	The framework works across industries and initiatives.
‚Ä¢	Existing roadmap text, timeline, scoring, and export features remain fully functional.
Please implement this end-to-end and show me:
1.	The updated assign_kpis function
2.	How initiatives are structured and passed to the template
3.	The new initiative rendering block in results.html
________________________________________
That‚Äôs the full feature spec.
You need to add this without disturbing existing functionality
